# SRE-NanoBot

> åŸºäº NanoBot çš„æ™ºèƒ½è¿ç»´ Agent å¹³å°

## æ¦‚è¿°

SRE-NanoBot æ˜¯ä¸€ä¸ªåŸºäº [NanoBot](https://github.com/HKUDS/nanobot) æ‰©å±•çš„æ™ºèƒ½è¿ç»´å¹³å°ï¼Œæ”¯æŒï¼š

- ğŸ¤– å¤š Agent åä½œï¼ˆK8s/Monitor/Incident/AutoFixï¼‰
- ğŸ”§ MCP å·¥å…·é›†æˆï¼ˆK8s/Prometheus/å‘Šè­¦ï¼‰
- ğŸ“± å¤šé€šé“é€šçŸ¥ï¼ˆé£ä¹¦/é’‰é’‰/Slackï¼‰
- âš¡ è‡ªåŠ¨æ•…éšœå¤„ç†
- ğŸ“Š ç›‘æ§å‘Šè­¦åˆ†æ

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… NanoBot

```bash
# å…‹éš† SRE-NanoBot
git clone https://github.com/your-org/sre-nanobot.git
cd sre-nanobot

# å®‰è£…ä¾èµ–
pip install -e .
```

### 2. é…ç½®

```bash
# åˆå§‹åŒ–é…ç½®
nanobot onboard

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim ~/.nanobot/config.json
```

### 3. å¯åŠ¨ K8s MCP æœåŠ¡å™¨

```bash
# å¯åŠ¨ K8s MCPï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰
python -m sre_nanobot.mcp.k8s_server
```

### 4. å¯åŠ¨ SRE-NanoBot

```bash
# å¯åŠ¨ç½‘å…³ï¼ˆæ¥æ”¶å‘Šè­¦å’Œæ¶ˆæ¯ï¼‰
nanobot gateway

# æˆ–ä½¿ç”¨ CLI æµ‹è¯•
nanobot agent -m "æ£€æŸ¥ production å‘½åç©ºé—´çš„ Pod çŠ¶æ€"
```

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SRE-NanoBot                                  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  K8s Agent    â”‚ â”‚  Monitor      â”‚ â”‚  Incident     â”‚         â”‚
â”‚  â”‚               â”‚ â”‚  Agent        â”‚ â”‚  Agent        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  AutoFix      â”‚ â”‚  Audit        â”‚ â”‚  Runbook      â”‚         â”‚
â”‚  â”‚  Agent        â”‚ â”‚  Agent        â”‚ â”‚  Executor     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                     â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  K8s MCP      â”‚     â”‚  Prometheus   â”‚     â”‚  Alertmanager â”‚
â”‚  Server       â”‚     â”‚  MCP Server   â”‚     â”‚  Webhook      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŠŸèƒ½

### K8s è¿ç»´

```bash
# æŸ¥çœ‹ Pod çŠ¶æ€
/k8s get_pods namespace=production

# é‡å¯ Deployment
/k8s restart namespace=production deployment=api-service

# æ‰©ç¼©å®¹
/k8s scale namespace=production deployment=api-service replicas=10

# æŸ¥çœ‹æ—¥å¿—
/k8s logs namespace=production pod=api-service-abc123
```

### å‘Šè­¦å¤„ç†

è‡ªåŠ¨æ¥æ”¶ Prometheus/äº‘ç›‘æ§å‘Šè­¦ï¼Œåˆ†ææ ¹å› å¹¶æ‰§è¡Œä¿®å¤ã€‚

### è‡ªåŠ¨ä¿®å¤

åŸºäºé¢„æ¡ˆåº“è‡ªåŠ¨æ‰§è¡Œä¿®å¤æ“ä½œï¼Œæ”¯æŒå®¡æ‰¹æµç¨‹ã€‚

## é…ç½®ç¤ºä¾‹

```json
{
  "providers": {
    "dashscope": {
      "apiKey": "sk-xxx"
    }
  },
  "agents": {
    "defaults": {
      "model": "dashscope/qwen-max"
    }
  },
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxx",
      "appSecret": "xxx"
    }
  },
  "tools": {
    "mcpServers": {
      "k8s": {
        "command": "python",
        "args": ["-m", "sre_nanobot.mcp.k8s_server"]
      },
      "prometheus": {
        "url": "https://prometheus.example.com/sse"
      }
    }
  }
}
```

## å¼€å‘è®¡åˆ’

- [x] é˜¶æ®µ 1: NanoBot éƒ¨ç½² + K8s MCP
- [ ] é˜¶æ®µ 2: Monitor Agent + Prometheus é›†æˆ
- [ ] é˜¶æ®µ 3: Incident Agent + æ•…éšœåˆ†æ
- [ ] é˜¶æ®µ 4: AutoFix Agent + é¢„æ¡ˆç³»ç»Ÿ
- [ ] é˜¶æ®µ 5: é£ä¹¦/é’‰é’‰é€šé“ + UI
- [ ] é˜¶æ®µ 6: æµ‹è¯• + æ–‡æ¡£ + ä¼˜åŒ–

## è®¸å¯è¯

MIT
