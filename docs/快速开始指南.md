# 快速开始指南

> 5 分钟上手 SRE-NanoBot

---

## 🎯 本指南适合

- 第一次使用 SRE-NanoBot
- 想快速了解核心功能
- 需要快速搭建测试环境

---

## 📋 前置要求

### 必需

- ✅ Python 3.10+
- ✅ Node.js 18+
- ✅ pip 和 npm

### 可选（用于完整功能）

- ⏳ Kubernetes 集群
- ⏳ Prometheus 服务器
- ⏳ 飞书企业版

---

## 🚀 5 分钟快速开始

### 第 1 分钟：克隆项目

```bash
git clone https://github.com/bugtest/sre-nanobot.git
cd sre-nanobot
```

### 第 2 分钟：安装依赖

```bash
# Python 依赖
pip install -e .

# 前端依赖
cd webui/frontend
npm install
cd ../..
```

### 第 3 分钟：配置

```bash
# 复制配置示例
cp config.example.json ~/.nanobot/config.json

# 最小配置（仅需修改 LLM API 密钥）
vim ~/.nanobot/config.json
```

**最小配置：**
```json
{
  "providers": {
    "dashscope": {
      "apiKey": "sk-your-api-key"
    }
  },
  "agents": {
    "defaults": {
      "model": "dashscope/qwen-max"
    }
  }
}
```

### 第 4 分钟：启动服务

```bash
# 终端 1：启动后端
cd webui/backend
uvicorn main:app --reload

# 终端 2：启动前端
cd webui/frontend
npm start
```

### 第 5 分钟：访问 WebUI

打开浏览器访问：**http://localhost:3000**

**默认功能：**
- ✅ Dashboard - 系统总览
- ✅ 告警中心 - 查看告警
- ✅ 故障管理 - 查看故障
- ✅ 预案管理 - 执行预案
- ✅ 监控指标 - 实时指标

---

## 🎯 核心功能体验

### 1. 查看 Dashboard

访问：http://localhost:3000/dashboard

**功能：**
- 系统健康状态
- 告警统计
- 自动修复统计
- 系统可用性

### 2. 查看告警

访问：http://localhost:3000/alerts

**功能：**
- 告警列表
- 状态筛选
- 严重性筛选
- 告警确认

### 3. 查看故障

访问：http://localhost:3000/incidents

**功能：**
- 故障列表
- 时间线展示
- 根因分析

### 4. 执行预案

访问：http://localhost:3000/runbooks

**功能：**
- 预案列表
- 执行预案
- 查看成功率

### 5. 查看监控指标

访问：http://localhost:3000/metrics

**功能：**
- CPU/内存实时图表
- 告警统计
- WebSocket 实时推送

---

## 🔧 CLI 快速使用

### 查看帮助

```bash
nanobot --help
```

### 查看 Pod 状态

```bash
nanobot agent -m "查看 default 命名空间的 Pod"
```

### 重启服务

```bash
nanobot agent -m "重启 deployment/api-service, namespace=default"
```

### 查看日志

```bash
nanobot agent -m "查看 pod/api-service-abc123 的日志，namespace=default"
```

---

## 📱 飞书集成（可选）

### 1. 创建飞书机器人

1. 打开飞书群 → 设置 → 群机器人
2. 添加自定义机器人
3. 复制 Webhook URL

### 2. 配置飞书

编辑 `~/.nanobot/config.json`：

```json
{
  "integrations": {
    "feishu_notifier": {
      "enabled": true,
      "webhook_url": "https://open.feishu.cn/open-apis/bot/v2/hook/YOUR_WEBHOOK"
    }
  }
}
```

### 3. 测试通知

```bash
python test_feishu.py
```

---

## 🧪 运行测试

### 集成测试

```bash
python test_integration.py
```

**预期输出：**
```
✅ 通过：7/7
状态：所有测试通过！
```

### 后端 API 测试

```bash
# 测试健康检查
curl http://localhost:8000/api/health

# 测试告警 API
curl http://localhost:8000/api/alerts

# 访问 API 文档
打开 http://localhost:8000/docs
```

---

## 📚 下一步

### 深入学习

- [项目文档](./) - 完整文档
- [飞书集成指南](./飞书集成指南.md) - 飞书配置
- [WebUI 文档](../webui/README.md) - WebUI 使用

### 生产部署

- [部署指南](./部署指南.md) - 生产环境部署
- [Docker 部署](./Docker 部署.md) - 容器化部署

### 自定义开发

- [开发指南](./开发指南.md) - 二次开发
- [API 文档](http://localhost:8000/docs) - API 参考

---

## 🆘 常见问题

### Q: 启动失败 "ModuleNotFoundError"

**A:** 确保已安装依赖：
```bash
pip install -e .
```

### Q: 前端无法访问后端

**A:** 检查后端是否启动：
```bash
curl http://localhost:8000/api/health
```

### Q: WebSocket 连接失败

**A:** WebSocket 是可选功能，会自动降级到轮询模式（30 秒刷新）

### Q: 没有 K8s 集群能用吗？

**A:** 可以！WebUI 和大部分功能可以正常使用，K8s 操作会返回模拟数据

---

## 📞 获取帮助

- **GitHub Issues:** https://github.com/bugtest/sre-nanobot/issues
- **文档:** 查看 [docs/](./) 目录
- **API 文档:** http://localhost:8000/docs

---

## 🎊 恭喜！

你已经完成了快速开始！

**现在可以：**
- ✅ 使用 WebUI 监控系统
- ✅ 查看告警和故障
- ✅ 执行运维预案
- ✅ 查看实时指标

**下一步：**
- 配置真实 K8s 集群
- 配置 Prometheus 监控
- 集成飞书通知
- 部署到生产环境

---

*最后更新：2026-02-27*
